class StaticPagesController < ApplicationController
  def home
  end

  def sql_injection
    @name_condition = params[:name]

    # 検索条件が「 ' or 1 = 1 -- 」だと攻撃できる
    @query = <<-SQL
      SELECT * 
      FROM users
      WHERE corporate_id = 5 and name like '%#{@name_condition}%';
    SQL
    results = ActiveRecord::Base.connection.select_all(@query)
    @users = results.to_hash.map { |res| User.new(res) }
  end

  # <script>alert('doyaaaaakenの攻撃！！効果は抜群だ！')</script> だと攻撃できる
  def xss
    cookies[:auth_id] = '1234555'
    @name_condition = (params[:name]) ? params[:name] : "無し"
    response.headers['X-XSS-Protection'] = '0'
    puts response.headers
    @users = User.where("corporate_id = ? and name like ?", 5, "%#{params[:name]}%")
  end

  def csrf

  end

  def csrf_paid_done
    @amount = params[:amount]
  end

  def click_jacking

  end
end
